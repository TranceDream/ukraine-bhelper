# éƒ¨ç½²æ–‡æ¡£

## 1.éƒ¨ç½²ç¯å¢ƒ

æœ¬é¡¹ç›®éƒ¨ç½²ç¯å¢ƒï¼š

- ç¡¬ä»¶ç¯å¢ƒ

â€‹		åä¸ºäº‘æœåŠ¡å™¨

â€‹		é²²é¹å†…å­˜ä¼˜åŒ–å‹|km1.large.8|2vCPUs|16GiB

â€‹		ç½‘ç»œï¼š300Mï¼ŒæŒ‰éœ€ä»˜è´¹

- æ“ä½œç³»ç»Ÿ

  CentOS 7.6 64bit with ARM|å…¬å…±é•œåƒ

- å…¶ä»–ï¼š

  å¼€æ”¾ç«¯å£ï¼š80ï¼Œ81ï¼Œ8006(å›¾ç‰‡ä»£ç†)

  å¦‚éœ€å†æ¬¡å¼€å‘ï¼Œå»ºè®®å¼€æ”¾40065ï¼Œæ–¹ä¾¿æŸ¥çœ‹log

  

**æ³¨æ„**ï¼šä¸å»ºè®®ä½¿ç”¨åä¸ºäº‘é²²é¹å¤„ç†å™¨ï¼Œå› ä¸ºå¯èƒ½ä¼šæœ‰ä¸€äº›æœªçŸ¥çš„bugï¼Œå¹¶ä¸”å®‰è£…è¿‡ç¨‹è¾ƒä¸ºç¹çã€‚ç”±äºç¤¾åŒºï¼Œæˆ–è€…æŠ€æœ¯æ–‡æ¡£ç¼ºä¹ï¼Œä¸€äº›bugéš¾ä»¥ä¿®å¤ã€‚

## 2. æ‰€éœ€è½¯ä»¶

### 2.1  æ£€æŸ¥å®‰è£…JDK

1.æŸ¥çœ‹äº‘ç«¯ç›®å‰æ”¯æŒå®‰è£…çš„JDKç‰ˆæœ¬

```vim
yum search java|grep jdk
```

 2.é€‰æ‹©JDKç‰ˆæœ¬ï¼Œå¹¶å®‰è£…

```apache
yum install -y java-1.7.0-openjdk
```

3.æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ

```applescript
java -version
```

 4.æŸ¥çœ‹JDKçš„å®‰è£…ç›®å½•

```routeros
find / -name 'java'
```

### 2.2 å®‰è£…MYSQL8

####  Mysql8.0å®‰è£… (YUMæ–¹å¼)

1. é¦–å…ˆåˆ é™¤ç³»ç»Ÿé»˜è®¤æˆ–ä¹‹å‰å¯èƒ½å®‰è£…çš„å…¶ä»–ç‰ˆæœ¬çš„mysql

```reasonml
[root@DB-node01 ~]# for i in $(rpm -qa|grep mysql);do rpm -e $i --nodeps;done
[root@DB-node01 ~]# rm -rf /var/lib/mysql && rm -rf /etc/my.cnf
```

2. å®‰è£…Mysql8.0 çš„yumèµ„æºåº“

```arduino
mysql80-community-release-el7-1.noarch.rpm    
 
[root@DB-node01 ~]# yum localinstall https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm
```

3. å®‰è£…Mysql8.0

```autoit
[root@DB-node01 ~]# yum install mysql-community-server
   
#å¯åŠ¨MySQLæœåŠ¡å™¨å’ŒMySQLçš„è‡ªåŠ¨å¯åŠ¨
[root@DB-node01 ~]# systemctl start mysqld
[root@DB-node01 ~]# systemctl enable mysqld
```

4. ä½¿ç”¨é»˜è®¤å¯†ç åˆæ¬¡ç™»å½•å, **å¿…é¡»è¦é‡ç½®å¯†ç **

```subunit
æŸ¥çœ‹é»˜è®¤å¯†ç , å¦‚ä¸‹é»˜è®¤å¯†ç ä¸º"e53xDalx.*dE"
[root@DB-node01 ~]# grep 'temporary password' /var/log/mysqld.log
2019-03-06T01:53:19.897262Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: e53xDalx.*dE
  
[root@DB-node01 ~]# mysql -pe53xDalx.*dE
............
mysql> select version();
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
```

**æŠ¥é”™æç¤ºå¿…é¡»è¦é‡ç½®åˆå§‹å¯†ç **, ä¸‹é¢å¼€å§‹é‡ç½®mysqlç™»å½•å¯†ç ï¼ˆæ³¨æ„è¦åˆ‡æ¢åˆ°mysqlæ•°æ®åº“ï¼Œä½¿ç”¨use

```subunit
mysql> use mysql;
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
   
mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
```

**è¿™ä¸ªå…¶å®ä¸validate_password_policyçš„å€¼æœ‰å…³, mysql8.0æ›´æ”¹äº†validate_password_policyç›¸å…³çš„é…ç½®åç§°**, è¿™è·ŸMysql5.7æœ‰ç‚¹ä¸ä¸€æ ·äº†.

```apache
mysql> set global validate_password.policy=0;
Query OK, 0 rows affected (0.00 sec)
   
mysql> set global validate_password.length=1;
Query OK, 0 rows affected (0.00 sec)
```

æ¥ç€å†ä¿®æ”¹å¯†ç 

```sas
[mysql](http://mp.weixin.qq.com/s?__biz=MzI0MDQ4MTM5NQ==&mid=2247495595&idx=1&sn=f6c169e610b38050c4eecda80f23cf37&chksm=e9188ab7de6f03a1531aa276b91cdbbc43d4ef0fafa13f21f8b6d93c88710e350f0b10ff18b1&scene=21#wechat_redirect)> ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
Query OK, 0 rows affected (0.05 sec)
   
mysql> flush privileges;
Query OK, 0 rows affected (0.03 sec)
```

é€€å‡º, é‡æ–°ä½¿ç”¨æ–°å¯†ç ç™»å½•mysql

```jboss-cli
[root@DB-node01 ~]# mysql -p123456
...........
mysql> select version();
+-----------+
| version() |
+-----------+
| 8.0.15    |
+-----------+
1 row in set (0.00 sec)
```

æŸ¥çœ‹æœåŠ¡ç«¯å£

```asciidoc
mysql> show global variables like 'port';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| port          | 3306  |
+---------------+-------+
1 row in set (0.01 sec)
```

æŸ¥çœ‹mysqlè¿æ¥çš„æˆæƒä¿¡æ¯

```subunit
mysql> select host,user,password from mysql.user;
ERROR 1054 (42S22): Unknown column 'password' in 'field list'
```

ä¸Šé¢è¿™æ˜¯mysql5.6åŠä»¥ä¸‹ç‰ˆæœ¬çš„æŸ¥çœ‹å‘½ä»¤, mysql5.7ä¹‹åçš„æ•°æ®åº“é‡Œmysql.userè¡¨é‡Œå·²ç»æ²¡æœ‰passwordè¿™ä¸ªå­—æ®µäº†ï¼Œpasswordå­—æ®µæ”¹æˆäº†authentication_stringã€‚

```asciidoc
mysql> select host,user,authentication_string from mysql.user;
+-----------+------------------+------------------------------------------------------------------------+
| host      | user             | authentication_string                                                  |
+-----------+------------------+------------------------------------------------------------------------+
| localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | root             | $A$005${7J0=4Dc7Jym8eI/FU4jimKWFvkD9XmoAkF1ca5.Un0bc6zgmPtU.0          |
+-----------+------------------+------------------------------------------------------------------------+
4 rows in set (0.00 sec)
```

mysql8.0ä¿®æ”¹ç”¨æˆ·å¯†ç å‘½ä»¤

```pgsql
mysql> use mysql;
mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';
mysql> flush privileges;Mysql8.0ä½¿ç”¨è¿‡ç¨‹ä¸­è¸©è¿‡çš„ä¸€äº›å‘
```

#### å¯èƒ½é‡åˆ°çš„ä¸€äº›é—®é¢˜

- 1)åˆ›å»ºç”¨æˆ·å’Œæˆæƒ åœ¨mysql8.0åˆ›å»ºç”¨æˆ·å’Œæˆæƒå’Œä¹‹å‰ä¸å¤ªä¸€æ ·äº†ï¼Œå…¶å®ä¸¥æ ¼ä¸Šæ¥è®²ï¼Œä¹Ÿä¸èƒ½è¯´æ˜¯ä¸ä¸€æ ·, åªèƒ½è¯´æ˜¯æ›´ä¸¥æ ¼, mysql8.0éœ€è¦å…ˆåˆ›å»ºç”¨æˆ·(åˆ›å»ºç”¨æˆ·æ—¶è¦å¸¦@å¹¶æŒ‡å®šåœ°å€, åˆ™grantæˆæƒæ—¶çš„åœ°å€å°±æ˜¯è¿™ä¸ª@åé¢æŒ‡å®šçš„!, å¦åˆ™grantæˆæƒå°±ä¼šæŠ¥é”™!)å’Œè®¾ç½®å¯†ç ,ç„¶åæ‰èƒ½æˆæƒã€‚

```routeros
mysql> create user 'kevin'@'%' identified by '123456';
Query OK, 0 rows affected (0.04 sec)
 
mysql> grant all privileges on *.* to 'kevin'@'%' with grant option;   
Query OK, 0 rows affected (0.04 sec)
 
mysql> create user 'bobo'@'%' identified by '123456';    
Query OK, 0 rows affected (0.06 sec)
 
mysql> grant all privileges on *.* to 'bobo'@'%' with grant option;
Query OK, 0 rows affected (0.03 sec)
 
mysql> flush privileges;
Query OK, 0 rows affected (0.04 sec)
 
mysql> select host,user,authentication_string from mysql.user;
+-----------+------------------+------------------------------------------------------------------------+
| host      | user             | authentication_string                                                  |
+-----------+------------------+------------------------------------------------------------------------+
| %         | bobo             | $A$005$1VY")q?G6<^X@-6LsXrPt5C0TwlTuvHbaOa3sYF0DKViIGoRPuCF8AzwiFcim1  |
| %         | kevin            | $A$005$hy`U}ZB#R::rA8W0y2rmwgySqzv0rmR1eTeNDSaXfQPWIsrh7ytbVdi85       |
| localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | root             | $A$005$/VO_y^7,]6;2qxggBLmJzhA0Qylu5/AHuRScZ/ykKedgZKh/6krOIzPs2       |
+-----------+------------------+------------------------------------------------------------------------+
```

**å¦‚æœè¿˜æ˜¯ç”¨Mysql5.7åŠä¹‹å‰ç‰ˆæœ¬çš„ç›´æ¥æˆæƒçš„æ–¹æ³•, ä¼šæœ‰æŠ¥é”™**

- 2)**Mysql8.0é»˜è®¤æ˜¯ä¸èƒ½ä½¿ç”¨rootè´¦å·è¿›è¡Œè¿œç¨‹ç™»å½•çš„! rootè´¦å·åªèƒ½æœ¬åœ°ç™»å½•!**

```gherkin
mysql> select host,user,authentication_string from mysql.user;
+-----------+------------------+------------------------------------------------------------------------+
| host      | user             | authentication_string                                                  |
+-----------+------------------+------------------------------------------------------------------------+
| %         | bobo             | $A$005$1VY")q?G6<^X@-6LsXrPt5C0TwlTuvHbaOa3sYF0DKViIGoRPuCF8AzwiFcim1 |
| %         | kevin            | $A$005$hy`U}ZB#R::rA8W0y2rmwgySqzv0rmR1eTeNDSaXfQPWIsrh7ytbVdi85 |
| localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | root             | $A$005$/VO_y^7,]6;2qxggBLmJzhA0Qylu5/AHuRScZ/ykKedgZKh/6krOIzPs2 |
+-----------+------------------+------------------------------------------------------------------------+
6 rows in set (0.00 sec)
```

å¦‚æœæƒ³è¦è¿œç¨‹ç™»å½•, åˆ™éœ€è¦è¿›è¡Œupdateæ›´æ–°ä¸‹rootè´¦å·çš„æƒé™

```asciidoc
mysql> update mysql.user set host='%' where user="root";
Query OK, 1 row affected (0.10 sec)
Rows matched: 1  Changed: 1  Warnings: 0
 
mysql> flush privileges;
Query OK, 0 rows affected (0.14 sec)
 
mysql> select host,user,authentication_string from mysql.user;
+-----------+------------------+------------------------------------------------------------------------+
| host      | user             | authentication_string                                                  |
+-----------+------------------+------------------------------------------------------------------------+
| %         | bobo             | $A$005$1VY")q?G6<^X@-6LsXrPt5C0TwlTuvHbaOa3sYF0DKViIGoRPuCF8AzwiFcim1  |
| %         | kevin            | $A$005$hy`U}ZB#R::rA8W0y2rmwgySqzv0rmR1eTeNDSaXfQPWIsrh7ytbVdi85       |
| %         | root             | $A$005$/VO_y^7,]6;2qxggBLmJzhA0Qylu5/AHuRScZ/ykKedgZKh/6krOIzPs2       |
| localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.session    | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
| localhost | mysql.sys        | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED |
+-----------+------------------+------------------------------------------------------------------------+
6 rows in set (0.00 sec)
```

è¿™æ ·å°±èƒ½åœ¨è¿œç¨‹ä½¿ç”¨rootè´¦å·ç™»å½•è¯¥mysql8.0çš„æ•°æ®åº“äº†

ä¿®æ”¹rootè´¦å·æƒé™, å…è®¸rootè´¦å·è¿œç¨‹ç™»å½•å, ç”¨navicatè¿›è¡Œmysqlçš„è¿œç¨‹è¿æ¥æ—¶ï¼Œå‡ºç°äº†å¼¹çª—æŠ¥é”™ã€‚å‡ºç°è¿™ä¸ªåŸå› æ˜¯mysql8 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­åŠ å¯†è§„åˆ™æ˜¯mysql_native_password, è€Œåœ¨mysql8ä¹‹å,åŠ å¯†è§„åˆ™æ˜¯caching_sha2_password, è§£å†³é—®é¢˜æ–¹æ³•:

ä¸€ç§æ˜¯æŠŠmysqlç”¨æˆ·ç™»å½•å¯†ç åŠ å¯†è§„åˆ™è¿˜åŸæˆmysql_native_password; 

```pgsql
#ä¿®æ”¹åŠ å¯†è§„åˆ™
mysql> ALTER USER 'root'@'%' IDENTIFIED BY '123456' PASSWORD EXPIRE NEVER;       
Query OK, 0 rows affected (0.16 sec)
 
#æ›´æ–°ä¸€ä¸‹ç”¨æˆ·çš„å¯†ç 
mysql> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';
Query OK, 0 rows affected (0.08 sec)
 
#åˆ·æ–°æƒé™
mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.03 sec)
```

è¿™æ ·é—®é¢˜å°±è§£å†³äº†ã€‚ 

#### é¡¹ç›®éœ€è¦çš„æ•°æ®åº“è¡¨

è§é™„å½•

### 2.3 å®‰è£…nginx

1ã€å®‰è£…nginxç¼–è¯‘ç¯å¢ƒ

```
yum -y install gcc-c++

yum -y install pcre-devel openssl openssl-devel
```

2ã€å®‰è£…ä¹‹å‰æ£€æŸ¥æ˜¯å¦æœ‰å®‰è£…è¿‡nginx

```find -name nginx```

3ã€å¦‚æœæœ‰å®‰è£…å¸è½½

```yum remove nginx```

4ã€é€‰æ‹©ä½ æƒ³è¦å®‰è£…çš„ç›®å½•ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯/usr/localä¸‹çš„ç›®å½•å®‰è£…

```cd /usr/local```

5ã€ç„¶åä¸‹è½½æœ€æ–°çš„nginx

```wget http://nginx.org/download/nginx-1.12.0.tar.gz```

6ã€è§£å‹nginxåŒ…

``tar -zxvf nginx-1.12.0.tar.gz``

7ã€é…ç½®nginxå®‰è£…ä¿¡æ¯

 è§£å‹ä¹‹åè¿›å…¥nginxå®‰è£…ç›®å½•åï¼Œæ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š

```./configure --prefix=/home/gaochao/nginx --with-http_ssl_module```

æ³¨ï¼šâ€“prefix å‚æ•°ï¼šæŒ‡å®šå®‰è£…ç›®å½•ï¼›â€“with-http_ssl_moduleï¼šç¼–è¯‘çš„æ—¶å€™å¯ç”¨SSLæ”¯æŒ

8ã€ç„¶åç¼–è¯‘ã€å®‰è£…

```
make
make install
```

9ã€ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹nginxçš„å®‰è£…è·¯å¾„

```whereis nginx```

10ã€ç»™nginxç›®å½•æƒé™

```chmod -R 777 /usr/local/nginx/```

è¿›å…¥cd /usr/local/nginx/sbin/å¯åŠ¨nginx./nginxï¼Œç„¶åæŸ¥çœ‹nginxæœåŠ¡æ˜¯å¦æˆåŠŸnetstat -ntlp

ç„¶åæ ¹æ®ipè¿›è¡Œè®¿é—®å³å¯.

**11.nginxé…ç½®é™æµ**

é…ç½®æ–‡ä»¶è§é™„å½•



### 2.4 å®‰è£…redis

1. å®‰è£…gccä¾èµ–
   ç”±äº redis æ˜¯ç”¨ C è¯­è¨€å¼€å‘ï¼Œå®‰è£…ä¹‹å‰å¿…å…ˆç¡®è®¤æ˜¯å¦å®‰è£… gcc ç¯å¢ƒï¼ˆgcc -vï¼‰ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼ˆå› ä¸ºè¿™ä¸€æ­¥æ²¡æœ‰åšå¯¼è‡´æˆ‘æ‰§è¡Œå®‰è£…å‘½ä»¤ä¸€ç›´æŠ¥é”™ï¼‰

```
yum install -y gcc 
```

2. ä¸‹è½½Redis  
   å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://redis.io/download
   æ‰¾åˆ°è¦ä¸‹è½½çš„ç‰ˆæœ¬å³é”®å¤åˆ¶ä¸‹è½½é“¾æ¥
3. éƒ½çŸ¥é“è™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨wgetå‘½ä»¤ç›´æ¥è”ç½‘ä¸‹è½½ ä½†æ˜¯è¿™ä¸ªä¸‹è½½è·¯å¾„ä¹Ÿå¾ˆé‡è¦ æ‰€ä»¥è¿™ä¸€æ­¥ğŸ‘†ä¸€å®šè¦è‡ªå·±è¿›å…¥å®˜ç½‘å¤åˆ¶ ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½æ˜¯ç›´æ¥ç»™çš„ä¸€ä¸ªä¸‹è½½å‘½ä»¤ ä½†æ˜¯é‚£ä¸ªå‘½ä»¤é‡Œé¢çš„ç‰ˆæœ¬ä¸ä¸€å®šéƒ½è¿˜åœ¨ æ‰€ä»¥å¿…é¡»è¦è‡ªå·±å»å¤åˆ¶ä¸€ä¸‹è¿™ä¸ªä¸‹è½½è·¯å¾„
   ç„¶åè¾“å…¥wget + åˆšåˆšå¤åˆ¶çš„ä¸‹è½½è·¯å¾„ å›è½¦è¿›è¡Œä¸‹è½½

```wget https://download.redis.io/releases/redis-6.2.5.tar.gz``



4. è§£å‹redis
   ä¸‹è½½å®Œåä½¿ç”¨è§£å‹å‘½ä»¤è¿›è¡Œè§£å‹

    ```tar -zvxf redis-6.2.5.tar.gz```

    è§£å‹å®Œæˆåä½¿ç”¨lså‘½ä»¤å¯ä»¥çœ‹åˆ°å½“å‰æ–‡ä»¶å¤¹æœ‰ä¸¤ä¸ªæ–‡ä»¶


    å› ä¸º redisä¸€èˆ¬æ”¾åœ¨/usr/local/redisè·¯å¾„ä¸‹ æ‰€ä»¥è¦ä½¿ç”¨å‘½ä»¤å°†æ–‡ä»¶ç§»åŠ¨è¿‡å» è¿™é‡Œæˆ‘çš„æ–‡ä»¶åœ¨optä¸‹
    
    ```mv /opt/redis-6.2.5 /usr/local/redis```
    
    cd åˆ°/usr/localç›®å½•ä¸‹å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰ç›®å½•å·²ç»å¤šäº†ä¸€ä¸ªrediså­ç›®å½•

5. å®‰è£…redis
   è¿›å…¥åˆ°redisç›®å½•è¾“å…¥makeæ‰§è¡Œç¼–è¯‘å‘½ä»¤

   å†è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…

   ``` make PREFIX=/usr/local/redis install```


    å¯åŠ¨redis
    
    cd bin
    ./redis-server
    
    ä» redis çš„æºç ç›®å½•ä¸­å¤åˆ¶ redis.conf åˆ° redis çš„å®‰è£…ç›®å½•

```cp /opt/redis-6.2.5/redis.conf /usr/local/redis/bin/```

6. ä¿®æ”¹ redis.conf æ–‡ä»¶ï¼ŒæŠŠ daemonize no æ”¹ä¸º daemonize yes 

``` vi redis.conf```

```./redis-server redis.conf```

7. æŸ¥çœ‹Redisæ˜¯å¦æ­£åœ¨è¿è¡Œ
   ```ps -ef | grep redis```

â€‹	```redis-cli```

â€‹	./redis-cliæ˜¯è¿æ¥æœ¬åœ°redisæœåŠ¡çš„ä¸€ä¸ªå‘½ä»¤ï¼Œé€šè¿‡è¯¥å‘½ä»¤åå¯ä»¥æ—¢å¯æ§åˆ¶redisçš„è„šæœ¬æ§åˆ¶å°



â€‹	å¦‚æœ RedisæŠ¥é”™ï¼š-bash: redis-cli: command not found 

â€‹	å°†redis-cliæ‹·è´åˆ°binä¸‹ï¼Œè®©redis-cliæŒ‡ä»¤å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹ç›´æ¥ä½¿ç”¨

```	cp /opt/redis-6.2.5/src/redis-cli.c /usr/local/redis/bin```

**æœåŠ¡æ“ä½œå‘½ä»¤**

```
systemctl start redis.service   #å¯åŠ¨redisæœåŠ¡

systemctl stop redis.service   #åœæ­¢redisæœåŠ¡

systemctl restart redis.service   #é‡æ–°å¯åŠ¨æœåŠ¡

systemctl status redis.service   #æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€

systemctl enable redis.service   #è®¾ç½®å¼€æœºè‡ªå¯åŠ¨

systemctl disable redis.service   #åœæ­¢å¼€æœºè‡ªå¯åŠ¨
```





### 2.5 å®‰è£…rabbitMQ

å› ä¸ºRabbitMQæ˜¯ç”±Erlangè¯­è¨€å¼€å‘çš„æ‰€ä»¥éœ€è¦å®‰è£…Erlangçš„å¼€å‘ç¯å¢ƒï¼Œå†å®‰è£…RabbitMQ

**å®‰è£…Erlang**

```
curl -s https://packagecloud.io/install/repositories/rabbitmq/erlang/script.rpm.sh | sudo bash
```



```
yum install erlang -y
```



 `å®‰è£…å®Œerlangåæ£€éªŒç‰ˆæœ¬`

```
erl -version
```



å®‰è£…rabbitmq

```
yum install rabbitmq-server -y
```



**é…ç½®rabbitmq**

```
# å¼€æœºå¯åŠ¨
systemctl enable rabbitmq-server.service# å¯åŠ¨rabbitmqsystemctl start rabbitmq-server.service

# å¼€å¯åå°ç®¡ç†
rabbitmq-plugins enable rabbitmq_management

# è®¾ç½®åå°ç®¡ç†å‘˜
rabbitmqctl add_user fahaxiki 'fhxj123'
rabbitmqctl set_user_tags fahaxiki administrator
rabbitmqctl set_permissions -p / fahaxiki '.*' '.*' '.*'

# é‡å¯rabbitmq
systemctl restart rabbitmq-server.service
```

å¯åŠ¨rabbitmqåï¼Œå¯ä»¥é€šè¿‡[http://x.x.x.x:15672](https://link.zhihu.com/?target=http%3A//x.x.x.x%3A15672)è®¿é—®ç®¡ç†åå°ï¼Œä½¿ç”¨ä¸Šé¢è®¾ç½®çš„ç®¡ç†å‘˜è´¦å·ç™»å½•ã€‚

æ³¨æ„ç«¯å£[15672](https://link.zhihu.com/?target=http%3A//x.x.x.x%3A15672)æ˜¯å¦å¼€æ”¾

![img](https://img2022.cnblogs.com/blog/1958533/202202/1958533-20220210151441001-348092435.png)

ç™»å½•æˆåŠŸ

<img src="https://img2022.cnblogs.com/blog/1958533/202202/1958533-20220210151253714-749230680.png" alt="img" style="zoom:67%;" />

![img](https://img2022.cnblogs.com/blog/1958533/202202/1958533-20220210143028668-2084416275.jpg)

 

 

 



### 2.6 å®‰è£…nacos

ä¸‹è½½

1. å®˜ç½‘ä¸‹è½½

2.  è§£å‹

```
cd /home/busapp/service/
tar xvf nacos.tar.gz
```

3. æ•°æ®åº“é…ç½®

è§é™„å½•ä¸‰

4. ä¿®æ”¹é…ç½®

```
cd /home/busapp/service/nacos/conf/
vim application.properties

db.num=1
db.url.0=jdbc:mysql://localhost:3306/nacos-mysql??characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true
db.user=root
db.password=123456
```

4. å¯ç”¨

```
cd /home/busapp/service/nacos/bin/
./startup.sh -m standalone &
```

## 3 éƒ¨ç½²

### 3.1 å‰ç«¯éƒ¨ç½²

éœ€è¦å®‰è£…nodeç¯å¢ƒ
å¯¹äºä½¿ç”¨Nodeçš„ç¯å¢ƒï¼Œå¤„ç†è¿™ä¸ªæœ€ç®€å•çš„æ–¹æ³•æ˜¯å®‰è£…serveå¹¶è®©å®ƒå¤„ç†å…¶ä½™çš„ï¼š

```
npm install -g serve
serve -s build
```


ä¸Šé¢æ˜¾ç¤ºçš„æœ€åä¸€ä¸ªå‘½ä»¤å°†åœ¨ç«¯å£3000ä¸Šä¸ºæ‚¨çš„é™æ€ç«™ç‚¹æä¾›æœåŠ¡ã€‚åƒè®¸å¤šserveçš„å†…éƒ¨è®¾ç½®ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨-læˆ–--listenæ ‡å¿—è°ƒæ•´ç«¯å£ï¼š

```
serve -s build -l 4000
```


è¿è¡Œæ­¤å‘½ä»¤ä»¥è·å–å¯ç”¨é€‰é¡¹çš„å®Œæ•´åˆ—è¡¨ï¼š

```
serve -h
```


å¦å¤–ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™æ¡

```
serve -s
```

ç„¶åä½ éœ€è¦cd distæ–‡ä»¶ä¸‹
è¿è¡Œ

```
serve -s
```

ä½¿ç”¨screenè¿›è¡Œä¼šè¯ç®¡ç†

éœ€è¦å®‰è£…screen

```


 tar -xzvf build.tar.gz 

 screen

 screen -ls

kill ID

serve -S ./
```

### 3.2 åç«¯éƒ¨ç½²

é¦–å…ˆåœ¨æœ¬åœ°è¿›è¡Œmavenç¼–è¯‘

ç”ŸæˆjaråŒ…

| æœåŠ¡å        | éƒ¨ç½²å‘½ä»¤F                                                    | FIRST | SECOND |
| ------------- | ------------------------------------------------------------ | ----- | ------ |
| Gateway       | nohup java -jar Gateway-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/Gateway.log & | 9001  | 9011   |
| UserService   | nohup java -jar UserService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/UserService.log & | 8001  |        |
| HouseService  | nohup java -jar HouseService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/HouseService.log & | 8002  | 8012   |
| SystemService | nohup java -jar SystemService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/System.log & | 8003  |        |
| AuditService  | nohup java -jar AuditService-0.0.1-SNAPSHOT.jar >/Ukother/Uklog/Audit.log & | 8004  |        |
| ReportService | nohup java -jar ReportService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/report.log & | 8005  |        |
| NewsService   | nohup java -jar NewsService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/NewService.log & | 8006  |        |
| PicService    | nohup java -jar PicService-0.0.1-SNAPSHOT.jar > /Ukother/Uklog/Pic.log  & | 8007  |        |

æœåŠ¡å™¨å®é™…

![image-20220521234203145](C:\Users\15900\AppData\Roaming\Typora\typora-user-images\image-20220521234203145.png)

logç›®å½•

![image-20220521234226552](C:\Users\15900\AppData\Roaming\Typora\typora-user-images\image-20220521234226552.png)

## é™„å½•1-é¡¹ç›®æ•°æ®åº“è¡¨

### æ•°æ®åº“-UA

```mysql
#å…±21å¼ è¡¨
CREATE TABLE `AUDIT` (
  `AUDIT_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OBJTYPE_ID` int NOT NULL,
  `OPERATOR` mediumtext NOT NULL,
  `OPER` int NOT NULL,
  `MESSAGE` varchar(200) DEFAULT NULL,
  `OBJ_ID` int NOT NULL,
  PRIMARY KEY (`AUDIT_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=50 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `city` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `country_id` int DEFAULT NULL COMMENT 'åŸå¸‚æ‰€åœ¨çš„å›½å®¶å¯¹åº”çš„id',
  `state` varchar(256) DEFAULT NULL COMMENT 'çœæˆ–è€…å·çš„è‹±æ–‡åç§°,è‹¥æŸå›½å®¶æ²¡æœ‰è¿™ä¸€ä¸ªè¡Œæ”¿çº§åˆ«,åˆ™ä¸ºç©º',
  `name` varchar(256) DEFAULT NULL COMMENT 'åŸå¸‚çš„æ ‡å‡†è‹±æ–‡åç§°',
  `lower_name` varchar(256) DEFAULT NULL COMMENT 'åŸå¸‚çš„å°å†™è‹±æ–‡åç§°,ç”¨äºæœç´¢',
  `cn_state` varchar(256) DEFAULT NULL COMMENT 'çœæˆ–è€…å·çš„ä¸­æ–‡åç§°,è‹¥æŸå›½å®¶æ²¡æœ‰è¿™ä¸€ä¸ªè¡Œæ”¿çº§åˆ«',
  `cn_name` varchar(256) DEFAULT NULL COMMENT 'åŸå¸‚çš„æ ‡å‡†ä¸­æ–‡åç§°',
  `city_code` varchar(64) DEFAULT NULL COMMENT 'åŸå¸‚çš„ä»£ç (ä¸€èˆ¬è¡¨ç¤ºç¼©å†™',
  `state_code` varchar(64) DEFAULT NULL COMMENT 'çœæˆ–è€…å·ä»£ç (ä¸€èˆ¬è¡¨ç¤ºç¼©å†™),è‹¥æŸä¸ªå›½å®¶æ²¡æœ‰å·æˆ–çœè¿™ä¸ªè¡Œæ”¿çº§åˆ«ï¼Œåˆ™ä¸ºç©º',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3758 DEFAULT CHARSET=utf8mb3;

CREATE TABLE `country` (
  `id` int unsigned NOT NULL AUTO_INCREMENT COMMENT 'è‡ªå¢id',
  `continent_id` int DEFAULT NULL COMMENT 'å¯¹åº”ä¸ƒå¤§é™†continentè¡¨çš„id',
  `name` varchar(256) DEFAULT NULL COMMENT 'è‹±æ–‡å¸¸ç”¨æ ‡å‡†åç§°ï¼Œä¸»è¦ç”¨äºæ˜¾ç¤º',
  `lower_name` varchar(256) DEFAULT NULL COMMENT 'å¯¹åº”äºè‹±æ–‡æ ‡å‡†åç§°çš„å°å†™ï¼Œä¸»è¦ç”¨äºæœç´¢æ¯”è¾ƒ',
  `country_code` varchar(64) DEFAULT NULL COMMENT 'è‹±æ–‡ç¼©å†™åç§°ï¼Œå…¨å¤§å†™',
  `full_name` varchar(256) DEFAULT NULL COMMENT 'è‹±æ–‡æ ‡å‡†åç§°å…¨ç§°',
  `cname` varchar(256) DEFAULT NULL COMMENT 'ä¸­æ–‡å¸¸ç”¨æ ‡å‡†åç§°ï¼Œé€šå¸¸ç®€ç§°',
  `full_cname` varchar(256) DEFAULT NULL COMMENT 'ä¸­æ–‡å…¨ç§°åç§°ï¼Œéç¼©å†™',
  `remark` text COMMENT 'å¤‡æ³¨å­—æ®µï¼Œä¿ç•™',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=213 DEFAULT CHARSET=utf8mb3;

CREATE TABLE `DICT_AUDIT_OPER` (
  `OPER_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OPER` varchar(200) NOT NULL,
  PRIMARY KEY (`OPER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10004 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_GROUP` (
  `GROUP_ID` int NOT NULL AUTO_INCREMENT,
  `GROUP_NAME` varchar(200) NOT NULL,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `PARENT_ID` int NOT NULL,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`GROUP_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10009 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_IDENTITY_TYPE` (
  `TYPE_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `TYPE_NAME` varchar(50) CHARACTER SET utf8mb3 COLLATE utf8_general_ci NOT NULL,
  `DELETE_MARK` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  PRIMARY KEY (`TYPE_ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=10002 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

CREATE TABLE `DICT_MENU` (
  `MENU_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `MENU` varchar(100) NOT NULL,
  `URL` varchar(200) NOT NULL,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `ICON` varchar(100) DEFAULT NULL,
  `DEFAULT_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`MENU_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10004 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_OBJTYPE` (
  `OBJTYPE_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OBJTYPE` varchar(200) NOT NULL,
  PRIMARY KEY (`OBJTYPE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10012 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_PERMISSION` (
  `PERMISSION_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `PERMISSION_NAME` varchar(30) CHARACTER SET utf8mb3 COLLATE utf8_general_ci NOT NULL,
  `DELETE_MARK` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  `URL` varchar(200) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT NULL,
  `PARENT_ID` int DEFAULT '1',
  `ICON` varchar(100) DEFAULT NULL,
  `PAGEKEY` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`PERMISSION_ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=100042 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

CREATE TABLE `DICT_ROLE` (
  `ROLE_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `ROLE_NAME` varchar(30) CHARACTER SET utf8mb3 COLLATE utf8_general_ci NOT NULL,
  `DELETE_MARK` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  PRIMARY KEY (`ROLE_ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=10032 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

CREATE TABLE `DICT_ROLE_MENU` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `ROLE_ID` int NOT NULL,
  `MENU_ID` int NOT NULL,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10039 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_ROLE_PERMISSION` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `PERMISSION_ID` int NOT NULL,
  `ROLE_ID` int NOT NULL,
  `DELETE_MARK` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  `LOCKED_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=10237 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

CREATE TABLE `DICT_SCOPE` (
  `SCOPE_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `SCOPE` varchar(100) NOT NULL,
  PRIMARY KEY (`SCOPE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10002 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_STATUS` (
  `STATUS_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `STATUS` varchar(200) NOT NULL,
  PRIMARY KEY (`STATUS_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_SYS_OPERATION` (
  `OPER_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OPER` varchar(200) NOT NULL,
  PRIMARY KEY (`OPER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10004 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `DICT_USER_ROLE` (
  `ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `USER_ID` int NOT NULL,
  `ROLE_ID` int NOT NULL,
  `DELETE_MARK` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_unicode_ci DEFAULT 'NO',
  `LOCKED_MARK` varchar(3) COLLATE utf8_unicode_ci DEFAULT 'NO',
  `GROUP_ID` int DEFAULT '10005',
  PRIMARY KEY (`ID`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=21527 DEFAULT CHARSET=utf8mb3 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC;

CREATE TABLE `MESSAGE` (
  `MESSAGE_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `CONTENT` varchar(1000) NOT NULL,
  `SCOPE` int DEFAULT NULL,
  `SPECIFIC_USERS` varchar(4000) DEFAULT NULL,
  `TITLE` varchar(100) NOT NULL,
  PRIMARY KEY (`MESSAGE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `REPORT` (
  `REPORT_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OBJTYPE_ID` int NOT NULL,
  `DEFENSE` int NOT NULL,
  `REASON` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `PROSECUTION` mediumtext NOT NULL,
  `HANDLE_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`REPORT_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10030 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `SYSLOG` (
  `LOG_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  `OBJTYPE_ID` int NOT NULL,
  `OBJ_ID` int NOT NULL,
  `OPERATOR` int NOT NULL,
  `OPERATION` int NOT NULL,
  `MESSAGE` varchar(200) NOT NULL,
  PRIMARY KEY (`LOG_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=280 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `USER` (
  `USER_ID` int NOT NULL AUTO_INCREMENT,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `COUNTRY` varchar(50) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT NULL,
  `CITY` varchar(50) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT NULL,
  `NAME` varchar(100) DEFAULT NULL,
  `IDENTITY_NO` varchar(30) DEFAULT NULL,
  `IFVERIFIED` varchar(3) DEFAULT 'NO',
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`USER_ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=10023 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

CREATE TABLE `USER_AUTH` (
  `AUTH_ID` int NOT NULL AUTO_INCREMENT,
  `USER_ID` int NOT NULL,
  `CREATE_TIME` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `IDENTITY_TYPE` int NOT NULL,
  `IDENTIFIER` varchar(50) CHARACTER SET utf8mb3 COLLATE utf8_general_ci NOT NULL,
  `CREDENTIAL` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8_general_ci NOT NULL,
  `IFVERIFIED` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  `DELETE_MARK` varchar(3) DEFAULT 'NO',
  PRIMARY KEY (`AUTH_ID`) USING HASH
) ENGINE=MEMORY AUTO_INCREMENT=10021 DEFAULT CHARSET=utf8mb3 ROW_FORMAT=DYNAMIC;

```

### æ•°æ®åº“-UAhouse

```mysql
å…±6å¼ è¡¨
CREATE TABLE `Contact` (
  `contactId` int NOT NULL AUTO_INCREMENT,
  `houseId` int NOT NULL,
  `createTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'NO',
  `content` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `typeId` int NOT NULL,
  PRIMARY KEY (`contactId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=82 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `contactType` (
  `typeId` int NOT NULL AUTO_INCREMENT,
  `createTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'NO',
  `contactName` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  PRIMARY KEY (`typeId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `filename` (
  `picId` int NOT NULL AUTO_INCREMENT,
  `createTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(255) NOT NULL DEFAULT 'NO',
  `filePath` varchar(500) NOT NULL,
  `houseId` int NOT NULL,
  PRIMARY KEY (`picId`)
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `HouseInfo` (
  `houseId` int unsigned NOT NULL AUTO_INCREMENT,
  `userId` int NOT NULL,
  `createTime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL DEFAULT 'NO',
  `title` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'WE CAN OFFER HELP',
  `country` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `province` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `city` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `address` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `guests` int DEFAULT '1',
  `pets` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'NO',
  `duration` int DEFAULT '1',
  `description` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `active` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'YES',
  PRIMARY KEY (`houseId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `tag` (
  `tagId` int NOT NULL AUTO_INCREMENT,
  `houseId` int NOT NULL,
  `createTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'NO',
  `typeId` int NOT NULL,
  PRIMARY KEY (`tagId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=143 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `tagType` (
  `typeId` int NOT NULL AUTO_INCREMENT,
  `createTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'NO',
  `tagName` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  PRIMARY KEY (`typeId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
```

### æ•°æ®åº“ UANews

```mysql
ä¸€å¼ è¡¨
CREATE TABLE `article` (
  `articleId` int NOT NULL AUTO_INCREMENT COMMENT 'intæ–‡ç« çš„å”¯ä¸€ID',
  `createTime` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `deleteMark` varchar(3) CHARACTER SET utf8mb3 COLLATE utf8_general_ci DEFAULT 'NO',
  `author` int NOT NULL,
  `title` varchar(100) NOT NULL COMMENT 'æ ‡é¢˜',
  `content` longtext NOT NULL COMMENT 'æ–‡ç« çš„å†…å®¹',
  `status` int DEFAULT '1',
  `groupId` int DEFAULT NULL,
  PRIMARY KEY (`articleId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=utf8mb3;
```

## é™„å½•2-nginx.conf

```
# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
 pid /run/nginx.pid;

# Load dynamic modules. See /usr/share/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

limit_req_zone $uri zone=api_read:20m rate=50r/s;

    limit_conn_zone $binary_remote_addr zone=addr:10m; 
 limit_conn_zone $server_name zone=perserver_conn:100m;


    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;

    server {
        listen       80 ;
      
        server_name  localhost;


        location / {
		root  /Uk/build;
		index  index.html;
		try_files $uri /index.html;
		# proxy_pass http://my_upstream;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
upstream gateway {
	
		server 127.0.0.1:9001;
		server 127.0.0.1:9002;
		server 127.0.0.2:9011;
	}


    server {
	
        listen       81;
        server_name  localhost;
        root         /usr/share/nginx/html;

limit_req zone=api_read burst=100;
# limit_conn perip_conn 50;
 limit_conn perserver_conn 200;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
#limit_req zone=api_read burst=100;
 #limit_conn perip_conn 50;
 #limit_conn perserver_conn 200;

	proxy_pass http://gateway/;
	proxy_connect_timeout 6000;
	proxy_read_timeout 6000;
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }


# Settings for a TLS enabled server.
#
#    server {
#        listen       443 ssl http2 default_server;
#        listen       [::]:443 ssl http2 default_server;
#        server_name  _;
#        root         /usr/share/nginx/html;
#
#        ssl_certificate "/etc/pki/nginx/server.crt";
#        ssl_certificate_key "/etc/pki/nginx/private/server.key";
#        ssl_session_cache shared:SSL:1m;
#        ssl_session_timeout  10m;
#        ssl_ciphers HIGH:!aNULL:!MD5;
#        ssl_prefer_server_ciphers on;
#
#        # Load configuration files for the default server block.
#        include /etc/nginx/default.d/*.conf;
#
#        location / {
#        }
#
#        error_page 404 /404.html;
#            location = /40x.html {
#        }
#
#        error_page 500 502 503 504 /50x.html;
#            location = /50x.html {
#        }
#    }

}


```

## é™„å½•3-nginxé…ç½® 

```mysql
/*
Navicat MySQL Data Transfer
Source Server         : 1.15.150.139-MES
Source Server Version : 50736
Source Host           : 1.15.150.139:3306
Source Database       : nacos-mysql
Target Server Type    : MYSQL
Target Server Version : 50736
File Encoding         : 65001
Date: 2022-02-17 14:57:58
*/
 
SET FOREIGN_KEY_CHECKS=0;
 
-- ----------------------------
-- Table structure for config_info
-- ----------------------------
DROP TABLE IF EXISTS `config_info`;
CREATE TABLE `config_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'data_id',
  `group_id` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `content` longtext COLLATE utf8_bin NOT NULL COMMENT 'content',
  `md5` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'ä¿®æ”¹æ—¶é—´',
  `src_user` text COLLATE utf8_bin COMMENT 'source user',
  `src_ip` varchar(20) COLLATE utf8_bin DEFAULT NULL COMMENT 'source ip',
  `app_name` varchar(128) COLLATE utf8_bin DEFAULT NULL,
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'ç§Ÿæˆ·å­—æ®µ',
  `c_desc` varchar(256) COLLATE utf8_bin DEFAULT NULL,
  `c_use` varchar(64) COLLATE utf8_bin DEFAULT NULL,
  `effect` varchar(64) COLLATE utf8_bin DEFAULT NULL,
  `type` varchar(64) COLLATE utf8_bin DEFAULT NULL,
  `c_schema` text COLLATE utf8_bin,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info';
 
-- ----------------------------
-- Records of config_info
-- ----------------------------
 
-- ----------------------------
-- Table structure for config_info_aggr
-- ----------------------------
DROP TABLE IF EXISTS `config_info_aggr`;
CREATE TABLE `config_info_aggr` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'data_id',
  `group_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'group_id',
  `datum_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'datum_id',
  `content` longtext COLLATE utf8_bin NOT NULL COMMENT 'å†…å®¹',
  `gmt_modified` datetime NOT NULL COMMENT 'ä¿®æ”¹æ—¶é—´',
  `app_name` varchar(128) COLLATE utf8_bin DEFAULT NULL,
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'ç§Ÿæˆ·å­—æ®µ',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='å¢åŠ ç§Ÿæˆ·å­—æ®µ';
 
-- ----------------------------
-- Records of config_info_aggr
-- ----------------------------
 
-- ----------------------------
-- Table structure for config_info_beta
-- ----------------------------
DROP TABLE IF EXISTS `config_info_beta`;
CREATE TABLE `config_info_beta` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'group_id',
  `app_name` varchar(128) COLLATE utf8_bin DEFAULT NULL COMMENT 'app_name',
  `content` longtext COLLATE utf8_bin NOT NULL COMMENT 'content',
  `beta_ips` varchar(1024) COLLATE utf8_bin DEFAULT NULL COMMENT 'betaIps',
  `md5` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'ä¿®æ”¹æ—¶é—´',
  `src_user` text COLLATE utf8_bin COMMENT 'source user',
  `src_ip` varchar(20) COLLATE utf8_bin DEFAULT NULL COMMENT 'source ip',
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'ç§Ÿæˆ·å­—æ®µ',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_beta';
 
-- ----------------------------
-- Records of config_info_beta
-- ----------------------------
 
-- ----------------------------
-- Table structure for config_info_tag
-- ----------------------------
DROP TABLE IF EXISTS `config_info_tag`;
CREATE TABLE `config_info_tag` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'group_id',
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'tenant_id',
  `tag_id` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'tag_id',
  `app_name` varchar(128) COLLATE utf8_bin DEFAULT NULL COMMENT 'app_name',
  `content` longtext COLLATE utf8_bin NOT NULL COMMENT 'content',
  `md5` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT 'md5',
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'ä¿®æ”¹æ—¶é—´',
  `src_user` text COLLATE utf8_bin COMMENT 'source user',
  `src_ip` varchar(20) COLLATE utf8_bin DEFAULT NULL COMMENT 'source ip',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_info_tag';
 
-- ----------------------------
-- Records of config_info_tag
-- ----------------------------
 
-- ----------------------------
-- Table structure for config_tags_relation
-- ----------------------------
DROP TABLE IF EXISTS `config_tags_relation`;
CREATE TABLE `config_tags_relation` (
  `id` bigint(20) NOT NULL COMMENT 'id',
  `tag_name` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'tag_name',
  `tag_type` varchar(64) COLLATE utf8_bin DEFAULT NULL COMMENT 'tag_type',
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL COMMENT 'data_id',
  `group_id` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'group_id',
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'tenant_id',
  `nid` bigint(20) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`nid`),
  UNIQUE KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),
  KEY `idx_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='config_tag_relation';
 
-- ----------------------------
-- Records of config_tags_relation
-- ----------------------------
 
-- ----------------------------
-- Table structure for group_capacity
-- ----------------------------
DROP TABLE IF EXISTS `group_capacity`;
CREATE TABLE `group_capacity` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `group_id` varchar(128) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT 'Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤',
  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'ä½¿ç”¨é‡',
  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'æœ€å¤§å˜æ›´å†å²æ•°é‡',
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'ä¿®æ”¹æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_group_id` (`group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨';
 
-- ----------------------------
-- Records of group_capacity
-- ----------------------------
 
-- ----------------------------
-- Table structure for his_config_info
-- ----------------------------
DROP TABLE IF EXISTS `his_config_info`;
CREATE TABLE `his_config_info` (
  `id` bigint(64) unsigned NOT NULL,
  `nid` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `data_id` varchar(255) COLLATE utf8_bin NOT NULL,
  `group_id` varchar(128) COLLATE utf8_bin NOT NULL,
  `app_name` varchar(128) COLLATE utf8_bin DEFAULT NULL COMMENT 'app_name',
  `content` longtext COLLATE utf8_bin NOT NULL,
  `md5` varchar(32) COLLATE utf8_bin DEFAULT NULL,
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00',
  `src_user` text COLLATE utf8_bin,
  `src_ip` varchar(20) COLLATE utf8_bin DEFAULT NULL,
  `op_type` char(10) COLLATE utf8_bin DEFAULT NULL,
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'ç§Ÿæˆ·å­—æ®µ',
  PRIMARY KEY (`nid`),
  KEY `idx_gmt_create` (`gmt_create`),
  KEY `idx_gmt_modified` (`gmt_modified`),
  KEY `idx_did` (`data_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='å¤šç§Ÿæˆ·æ”¹é€ ';
 
-- ----------------------------
-- Records of his_config_info
-- ----------------------------
 
-- ----------------------------
-- Table structure for roles
-- ----------------------------
DROP TABLE IF EXISTS `roles`;
CREATE TABLE `roles` (
  `username` varchar(50) NOT NULL,
  `role` varchar(50) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
 
-- ----------------------------
-- Records of roles
-- ----------------------------
INSERT INTO `roles` VALUES ('nacos', 'ROLE_ADMIN');
 
-- ----------------------------
-- Table structure for tenant_capacity
-- ----------------------------
DROP TABLE IF EXISTS `tenant_capacity`;
CREATE TABLE `tenant_capacity` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `tenant_id` varchar(128) COLLATE utf8_bin NOT NULL DEFAULT '' COMMENT 'Tenant ID',
  `quota` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `usage` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'ä½¿ç”¨é‡',
  `max_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `max_aggr_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°',
  `max_aggr_size` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼',
  `max_history_count` int(10) unsigned NOT NULL DEFAULT '0' COMMENT 'æœ€å¤§å˜æ›´å†å²æ•°é‡',
  `gmt_create` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` datetime NOT NULL DEFAULT '2010-05-05 00:00:00' COMMENT 'ä¿®æ”¹æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨';
 
-- ----------------------------
-- Records of tenant_capacity
-- ----------------------------
 
-- ----------------------------
-- Table structure for tenant_info
-- ----------------------------
DROP TABLE IF EXISTS `tenant_info`;
CREATE TABLE `tenant_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `kp` varchar(128) COLLATE utf8_bin NOT NULL COMMENT 'kp',
  `tenant_id` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'tenant_id',
  `tenant_name` varchar(128) COLLATE utf8_bin DEFAULT '' COMMENT 'tenant_name',
  `tenant_desc` varchar(256) COLLATE utf8_bin DEFAULT NULL COMMENT 'tenant_desc',
  `create_source` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT 'create_source',
  `gmt_create` bigint(20) NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´',
  `gmt_modified` bigint(20) NOT NULL COMMENT 'ä¿®æ”¹æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),
  KEY `idx_tenant_id` (`tenant_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='tenant_info';
 
-- ----------------------------
-- Records of tenant_info
-- ----------------------------
 
-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `username` varchar(50) NOT NULL,
  `password` varchar(500) NOT NULL,
  `enabled` tinyint(1) NOT NULL,
  PRIMARY KEY (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
 
-- ----------------------------
-- Records of users
-- ----------------------------
INSERT INTO `users` VALUES ('nacos', '$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu', '1');
```

